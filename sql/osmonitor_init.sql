---- DDL

DROP TABLE IF EXISTS config_options;

CREATE TABLE config_options (
  option_key text NOT NULL PRIMARY KEY,
  text_value text,
  geom_value geometry,
  date_value timestamp without time zone
);

DROP TABLE IF EXISTS report_statuses;

CREATE TABLE report_statuses (
  road_ref text NOT NULL,
  country text NOT NULL,
  cached_date timestamp without time zone NOT NULL,
  status bytea,
  PRIMARY KEY(road_ref, country)
);

---- DATA

-- Boundary for Poland
INSERT INTO config_options (option_key, geom_value) VALUES ('boundary_PL', ST_PolygonFromText('POLYGON((16.118053 50.657799,16.071388 50.635551,16.024441 50.629997,15.946943 50.689438,15.787498 50.744164,15.606667 50.772774,15.488333 50.786659,15.379720 50.779442,15.362846 50.840622,15.311666 50.860344,15.282777 50.892078,15.272499 50.924511,15.290416 50.948956,15.275276 50.974998,15.239443 50.991943,15.176943 51.014717,15.016388 50.974094,15.019165 50.950554,15.003887 50.867496,14.966665 50.859161,14.828333 50.865829,14.826179 50.883053,14.896944 50.959442,14.931110 51.002495,14.965555 51.052216,14.978888 51.078331,14.994444 51.118607,15.032221 51.239166,15.033818 51.286659,15.002638 51.316799,14.983333 51.333611,14.971666 51.357220,14.981833 51.368050,14.975555 51.440826,14.953054 51.469994,14.921110 51.481941,14.837500 51.498604,14.739444 51.526524,14.714998 51.554722,14.759235 51.607494,14.756110 51.666733,14.722082 51.690968,14.698055 51.702217,14.667985 51.723885,14.600971 51.820065,14.610138 51.848190,14.645415 51.865276,14.689860 51.896942,14.717551 51.943111,14.760765 52.069862,14.707915 52.245621,14.692497 52.254440,14.655832 52.260277,14.598886 52.272774,14.579860 52.288330,14.534443 52.396248,14.543958 52.421871,14.563193 52.433189,14.585137 52.439857,14.633540 52.490551,14.639582 52.572979,14.595778 52.606831,14.554582 52.627220,14.514443 52.639164,14.478749 52.652496,14.448332 52.675278,14.383333 52.730827,14.355000 52.748329,14.205416 52.818607,14.149166 52.862778,14.147637 52.959232,14.168888 52.973328,14.200277 52.984718,14.225415 52.988884,14.293739 53.018768,14.347361 53.048885,14.380277 53.110134,14.391689 53.144165,14.412777 53.304443,14.413261 53.338959,14.309721 53.555550,14.275627 53.699066,14.366110 53.699440,14.410693 53.680550,14.525000 53.660553,14.554722 53.678604,14.620277 53.767914,14.614166 53.816383,14.580832 53.847496,14.553472 53.857773,14.476665 53.864578,14.412568 53.859924,14.339443 53.804855,14.289999 53.822777,14.266109 53.836662,14.218887 53.869019,14.215832 53.899994,14.225555 53.928604,14.249861 53.922356,14.327776 53.912498,14.350277 53.910553,14.376388 53.912220,14.425416 53.922497,14.483332 53.947220,14.504304 53.959164,14.559444 53.976662,14.745277 54.028610,14.814444 54.039162,14.979721 54.071388,15.228054 54.129440,15.302777 54.147774,15.353888 54.156387,15.395859 54.160629,15.429443 54.162216,15.493472 54.166523,15.654166 54.193886,15.752360 54.214165,15.794167 54.226105,15.839304 54.241386,15.876389 54.246384,16.047775 54.261665,16.081387 54.254303,16.144026 54.252914,16.174721 54.259163,16.217777 54.273605,16.329441 54.356800,16.304928 54.372288,16.318333 54.391106,16.408222 54.461525,16.460552 54.499718,16.489529 54.518669,16.515553 54.534164,16.543610 54.544716,16.571663 54.551109,16.638611 54.563606,16.665276 54.566940,16.701942 54.568745,16.793331 54.575829,16.884163 54.589722,16.915276 54.597771,16.939442 54.605412,17.019165 54.647495,17.036526 54.660553,17.065832 54.673470,17.251108 54.730274,17.362221 54.747772,17.434166 54.752777,17.530552 54.762215,17.592915 54.769997,17.686607 54.789093,17.774441 54.806389,17.896942 54.823883,17.918888 54.826660,18.043331 54.834026,18.336109 54.836037,18.372776 54.816109,18.449333 54.788273,18.526833 54.760773,18.578165 54.744106,18.605833 54.735607,18.703888 54.700272,18.739998 54.685272,18.774719 54.666382,18.832672 54.621037,18.820969 54.593742,18.786110 54.618607,18.772081 54.633610,18.755554 54.656105,18.730831 54.678329,18.706247 54.693607,18.571943 54.729660,18.503942 54.753498,18.483400 54.759121,18.466944 54.736832,18.406109 54.738190,18.468330 54.665833,18.511387 54.631104,18.547775 54.587704,18.566664 54.550690,18.569790 54.476662,18.574303 54.446526,18.595205 54.427773,18.708332 54.382774,18.757774 54.370827,18.843748 54.351803,18.893192 54.345551,18.927359 54.346386,18.953888 54.351662,18.970552 54.345135,19.022778 54.342216,19.046387 54.342216,19.138885 54.346664,19.212498 54.353882,19.374443 54.373604,19.417500 54.380554,19.439720 54.385826,19.516804 54.407082,19.562775 54.428886,19.613331 54.454720,19.627258 54.463272,19.651108 54.455826,19.630344 54.443069,19.524441 54.396660,19.428333 54.365273,19.408051 54.358887,19.376108 54.352497,19.277636 54.346107,19.230761 54.333672,19.253330 54.278187,19.371109 54.268600,19.478746 54.314159,19.571039 54.346939,19.628746 54.350548,19.713608 54.383331,19.797007 54.437550,19.857704 54.429909,20.004166 54.419159,20.090553 54.418602,20.158607 54.411934,20.301388 54.397774,20.329082 54.393833,20.331182 54.393532,20.371662 54.387772,20.432774 54.381660,20.738884 54.358047,20.898052 54.356102,21.126385 54.341660,21.181938 54.336380,21.231937 54.332771,21.283607 54.329994,21.367218 54.327217,21.411942 54.325829,21.442493 54.325554,21.524166 54.326942,21.570435 54.328209,21.577515 54.328403,21.625553 54.329720,21.731380 54.330833,21.855553 54.331665,21.981937 54.332771,22.164997 54.334991,22.265553 54.338043,22.296150 54.339909,22.429731 54.345543,22.455551 54.345543,22.629997 54.348877,22.664162 54.351105,22.766665 54.359718,22.785885 54.363838,22.812220 54.395966,22.835136 54.405128,22.863190 54.408321,22.995066 54.385757,23.115829 54.304436,23.204441 54.287216,23.333054 54.247215,23.356108 54.235409,23.457771 54.174160,23.484440 54.138329,23.494160 54.117210,23.517498 54.038746,23.508053 53.960548,23.504040 53.947044,23.502777 53.942490,23.503887 53.921379,23.510012 53.899323,23.539719 53.840828,23.580551 53.731102,23.590443 53.694431,23.592775 53.685268,23.608608 53.637497,23.617218 53.614021,23.640274 53.559158,23.673536 53.493744,23.700550 53.453049,23.785917 53.314335,23.858608 53.195824,23.933191 53.012077,23.927492 52.948376,23.931385 52.858604,23.938660 52.774712,23.939716 52.770271,23.941105 52.749718,23.935274 52.717487,23.911800 52.693184,23.883884 52.678047,23.746801 52.614647,23.715824 52.615952,23.688328 52.617210,23.655273 52.610275,23.633606 52.605553,23.597218 52.596382,23.523052 52.573608,23.503609 52.567497,23.417217 52.525269,23.397217 52.514442,23.377495 52.498329,23.248383 52.374485,23.165400 52.282276,23.192772 52.233189,23.214716 52.223461,23.297775 52.211662,23.348330 52.206795,23.594997 52.111938,23.638607 52.079437,23.660828 52.006104,23.626801 51.952076,23.612482 51.915955,23.558052 51.752495,23.547775 51.686378,23.555483 51.665199,23.534992 51.653595,23.539165 51.592766,23.567175 51.539600,23.604633 51.527695,23.614086 51.498627,23.643635 51.485012,23.692772 51.402351,23.681246 51.369297,23.683884 51.288605,23.731937 51.214714,23.756664 51.199432,23.811108 51.168884,23.904997 51.068054,23.931665 50.994072,23.965134 50.950405,23.988327 50.931107,24.034302 50.898254,24.061497 50.887524,24.090275 50.881935,24.143469 50.859577,24.131037 50.838184,24.076942 50.829437,24.052498 50.831383,24.021894 50.831753,23.980967 50.829578,23.958397 50.815201,23.954386 50.791702,24.014721 50.739990,24.072220 50.695824,24.107220 50.633606,24.108414 50.625900,24.111385 50.566940,24.002218 50.414436,23.983189 50.405960,23.929440 50.403603,23.881496 50.405411,23.846943 50.406654,23.814442 50.405823,23.791943 50.402489,23.755833 50.394440,23.717590 50.383839,23.697111 50.370113,23.684175 50.333698,23.591106 50.269157,23.568886 50.255829,23.540276 50.242779,23.496105 50.220825,23.378330 50.149719,23.342823 50.127491,23.324440 50.115273,23.303608 50.100830,23.228189 50.046661,23.146107 49.983047,23.110828 49.954994,22.779999 49.674995,22.717216 49.604439,22.686068 49.577095,22.678467 49.569439,22.656870 49.529854,22.694439 49.450829,22.732788 49.397209,22.758818 49.285896,22.726662 49.217766,22.703814 49.169888,22.778053 49.150543,22.852776 49.105827,22.876522 49.087421,22.863504 49.049831,22.886074 49.002914,22.863050 49.003048,22.737774 49.047218,22.594147 49.091534,22.568470 49.087910,22.558052 49.079437,22.537777 49.087914,22.348886 49.138470,22.323887 49.138611,22.224998 49.154716,22.029894 49.220238,22.025276 49.247215,22.020136 49.273884,21.958611 49.340275,21.838055 49.384438,21.612638 49.436523,21.533607 49.429718,21.500832 49.422218,21.459303 49.411942,21.436386 49.413887,21.400845 49.429054,21.281944 49.456387,21.071527 49.422081,21.050554 49.410549,21.035553 49.359718,20.982359 49.309441,20.955830 49.301666,20.913609 49.296104,20.812496 49.330826,20.740833 49.388885,20.602776 49.395554,20.360554 49.393051,20.327774 49.383331,20.206665 49.340271,20.143608 49.314995,20.103333 49.248604,20.092636 49.204857,20.073364 49.177876,20.039165 49.188889,20.020554 49.199440,19.998896 49.217625,19.979582 49.226387,19.936386 49.231110,19.911247 49.226173,19.867910 49.197132,19.842915 49.191803,19.783470 49.200203,19.765970 49.214439,19.773609 49.233055,19.798054 49.252777,19.825657 49.277565,19.804996 49.364716,19.778017 49.407494,19.710552 49.397499,19.658607 49.406662,19.577082 49.459023,19.535275 49.535553,19.520981 49.574165,19.475555 49.599998,19.447777 49.600830,19.269026 49.526661,19.242359 49.506802,19.199303 49.437775,19.191666 49.414024,19.159580 49.400272,19.031666 49.391937,18.974928 49.401939,18.968330 49.456383,18.968609 49.481667,18.851246 49.517357,18.852219 49.527771,18.847775 49.554161,18.839443 49.594994,18.810831 49.673328,18.786942 49.681938,18.634163 49.737778,18.579350 49.814995,18.578747 49.912220,18.552706 49.922424,18.350277 49.938889,18.270275 49.957771,18.094166 50.038055,18.053162 50.055931,18.009441 50.011108,17.920691 49.977360,17.876247 49.978954,17.840137 49.989578,17.657776 50.108055,17.606318 50.162701,17.642776 50.171944,17.695276 50.179024,17.763678 50.209370,17.762915 50.233330,17.753052 50.297775,17.724442 50.319023,17.697012 50.320271,17.693470 50.299995,17.661110 50.272358,17.626804 50.265549,17.433052 50.270271,17.378330 50.279442,17.283607 50.320274,17.226944 50.345276,17.205276 50.360970,17.118053 50.396660,17.057777 50.410553,16.941387 50.434998,16.910831 50.440132,16.890968 50.438675,16.868748 50.411179,16.937496 50.340553,16.972775 50.309998,17.002220 50.216942,16.968609 50.222771,16.911386 50.222359,16.846943 50.201801,16.811247 50.179440,16.802935 50.169651,16.786663 50.140549,16.715345 50.098328,16.639997 50.108887,16.614441 50.119720,16.587776 50.139999,16.565969 50.170345,16.562222 50.208191,16.548054 50.227081,16.458611 50.303604,16.441387 50.316666,16.371944 50.361107,16.303055 50.378052,16.266109 50.389717,16.219027 50.410275,16.207739 50.439022,16.314999 50.504719,16.358923 50.497910,16.406666 50.523048,16.447359 50.578815,16.430277 50.601524,16.369999 50.644165,16.332012 50.664024,16.237499 50.670555,16.137497 50.656105,16.118053 50.657799))', 4326));

-- Boundary for Serbia
INSERT INTO config_options (option_key, geom_value) VALUES ('boundary_RS', ST_PolygonFromText('POLYGON((20.071423 42.560913,20.105831 42.642776,20.106941 42.646660,20.107220 42.654442,20.101665 42.659996,20.094444 42.664444,20.070000 42.673882,20.048611 42.677773,20.025276 42.678886,20.015274 42.680832,20.007774 42.684441,19.980274 42.701385,19.977497 42.703888,19.975277 42.707497,19.976944 42.715271,19.980274 42.721939,19.990833 42.733330,20.014999 42.752495,20.039444 42.766106,20.066666 42.773048,20.076664 42.773888,20.088608 42.773605,20.104443 42.770271,20.112778 42.767494,20.231941 42.761108,20.379444 42.833328,20.382774 42.835548,20.376942 42.849159,20.348888 42.886383,20.343330 42.891106,20.297497 42.926384,20.286942 42.932495,20.259720 42.941666,20.178333 42.967499,20.164165 42.971107,20.153053 42.972221,20.147499 42.971664,20.059719 43.005554,20.035831 43.037216,19.969719 43.090553,19.920277 43.106384,19.783607 43.148048,19.692497 43.170830,19.670830 43.174438,19.656666 43.178055,19.647778 43.181664,19.641941 43.186104,19.585831 43.236107,19.563332 43.256386,19.560276 43.263329,19.558609 43.270271,19.548332 43.284996,19.517776 43.317215,19.511944 43.321938,19.444164 43.373604,19.279442 43.449715,19.254719 43.459999,19.228809 43.513214,19.287498 43.544167,19.408607 43.584442,19.480553 43.571388,19.493889 43.588051,19.510830 43.679718,19.510277 43.691940,19.509720 43.700272,19.505554 43.718887,19.500832 43.733887,19.498333 43.740273,19.492775 43.753609,19.487499 43.763329,19.475277 43.772774,19.437496 43.800278,19.366943 43.859444,19.251221 43.962379,19.237019 44.002831,19.237019 44.011009,19.239441 44.014160,19.244335 44.014450,19.306740 43.998528,19.311108 43.996941,19.351498 43.981743,19.355274 43.979721,19.359722 43.974159,19.365833 43.969162,19.374165 43.965553,19.428532 43.960655,19.485275 43.958885,19.514175 43.958076,19.524502 43.958939,19.532249 43.962379,19.616173 44.016602,19.619442 44.018883,19.621765 44.021767,19.620476 44.048454,19.619720 44.052216,19.617031 44.054909,19.596943 44.060272,19.485832 44.120277,19.357952 44.209412,19.239998 44.264999,19.234867 44.265358,19.165833 44.284439,19.161705 44.286011,19.158054 44.288330,19.130276 44.313889,19.127705 44.316574,19.104443 44.355827,19.105553 44.376663,19.123402 44.514542,19.128136 44.521423,19.135883 44.524864,19.193981 44.560158,19.313610 44.704720,19.336109 44.747215,19.344612 44.766304,19.345833 44.769165,19.382774 44.863052,19.381622 44.866577,19.371387 44.889160,19.310276 44.908607,19.299442 44.910271,19.188053 44.923332,19.177219 44.923607,19.168053 44.921387,19.121109 44.901382,19.039719 44.861382,19.028610 44.880272,19.015831 44.889442,19.009441 44.894440,19.004719 44.900276,19.004444 44.904442,19.006107 44.907776,19.010830 44.914162,19.013611 44.916664,19.032497 44.930832,19.036663 44.932495,19.043053 44.931664,19.050831 44.928055,19.115555 45.031944,19.104164 45.096664,19.163609 45.212219,19.171108 45.216385,19.187496 45.216942,19.207331 45.211662,19.218330 45.208332,19.234997 45.198883,19.247219 45.184715,19.250832 45.182777,19.261665 45.180275,19.352497 45.173332,19.411110 45.174995,19.415833 45.175827,19.422775 45.179993,19.424442 45.189163,19.426109 45.209999,19.423885 45.225830,19.418331 45.234718,19.400093 45.235832,19.388962 45.235748,19.356667 45.234161,19.344460 45.235001,19.320339 45.238365,19.285004 45.243408,19.260521 45.247429,19.190205 45.270332,19.138611 45.287498,19.112499 45.298050,18.988609 45.370827,18.980324 45.378624,18.978054 45.389717,18.996387 45.483330,18.997711 45.487450,19.000000 45.490829,19.010239 45.497169,19.020523 45.498665,19.030621 45.495483,19.042500 45.489716,19.051666 45.486664,19.057545 45.485580,19.073887 45.486107,19.087837 45.489502,19.094753 45.493805,19.099800 45.499786,19.101673 45.508949,19.099987 45.515869,19.095875 45.521851,19.024719 45.561386,19.020523 45.562988,19.014164 45.563889,19.003887 45.562492,18.999771 45.561119,18.996944 45.558052,18.973969 45.541298,18.965366 45.538681,18.955269 45.537186,18.942181 45.538681,18.933018 45.541855,18.925346 45.547844,18.904785 45.567284,18.902496 45.570274,18.900833 45.577499,18.907215 45.613281,18.909458 45.620758,18.912498 45.623329,18.933609 45.625275,18.939163 45.630829,18.960552 45.654160,18.968357 45.663017,18.969166 45.667496,18.969479 45.671616,18.958611 45.778610,18.957489 45.781944,18.955276 45.784721,18.924442 45.811943,18.908886 45.819443,18.903610 45.820274,18.889721 45.824997,18.883053 45.828888,18.833054 45.873886,18.831654 45.877129,18.817020 45.912964,18.835831 45.911110,18.858887 45.911110,18.995552 45.952499,19.006664 45.963882,19.012775 45.968887,19.080555 46.017220,19.087776 46.021385,19.096386 46.024437,19.107498 46.025833,19.119164 46.024994,19.123886 46.023605,19.130554 46.019997,19.136387 46.014999,19.148609 45.991661,19.151386 45.988884,19.155277 45.987221,19.161110 45.986664,19.281666 45.988327,19.286388 45.989441,19.460552 46.074165,19.467220 46.078606,19.511387 46.111664,19.517498 46.116661,19.518887 46.120277,19.517498 46.123886,19.506386 46.134438,19.504444 46.137497,19.505833 46.141106,19.508610 46.143883,19.559998 46.171944,19.570553 46.173607,19.660275 46.181389,19.672775 46.180832,19.703720 46.176392,19.744720 46.162216,19.842499 46.149162,19.845833 46.151382,19.850277 46.152771,19.859722 46.155273,19.961109 46.170830,20.112221 46.167496,20.118332 46.166939,20.200832 46.151382,20.204720 46.149719,20.257774 46.118050,20.261024 46.114853,20.306664 46.076111,20.321388 46.063606,20.352497 46.027222,20.353611 46.023605,20.352776 46.010277,20.355000 46.003052,20.360832 45.993332,20.368332 45.984993,20.378052 45.978050,20.506386 45.915833,20.515553 45.913055,20.526665 45.912216,20.545555 45.912498,20.561943 45.909996,20.578888 45.903328,20.591663 45.894165,20.654999 45.833885,20.656944 45.830826,20.656944 45.813049,20.660553 45.801941,20.664165 45.795555,20.709999 45.746109,20.713333 45.743889,20.721664 45.740555,20.727497 45.739998,20.738609 45.741104,20.747776 45.743607,20.757774 45.750275,20.764164 45.759720,20.767498 45.766663,20.773052 45.771942,20.776943 45.773605,20.782776 45.773888,20.788055 45.773048,20.795830 45.769165,20.801388 45.764160,20.804443 45.757217,20.804722 45.744164,20.798885 45.656662,20.796108 45.649437,20.780552 45.637497,20.772499 45.629166,20.768330 45.622772,20.766941 45.619164,20.766666 45.609993,20.768330 45.602219,20.794167 45.507774,20.808331 45.478882,20.986664 45.345833,21.048885 45.316383,21.267498 45.232773,21.276386 45.229721,21.351387 45.217773,21.404999 45.216110,21.416664 45.214722,21.473370 45.187447,21.482777 45.183609,21.513611 45.151108,21.515274 45.147774,21.516109 45.139717,21.514164 45.126938,21.512775 45.123329,21.443054 45.053604,21.381943 45.023331,21.372776 45.020828,21.369442 45.018608,21.367222 45.015549,21.366943 45.008331,21.371109 45.002220,21.376110 44.996666,21.405552 44.973328,21.408886 44.971107,21.429722 44.961662,21.441109 44.960274,21.459164 44.964439,21.470833 44.963051,21.475555 44.961662,21.527775 44.944160,21.540833 44.938606,21.546944 44.933884,21.551388 44.928055,21.556389 44.918610,21.559719 44.908607,21.559719 44.900551,21.558609 44.896111,21.555832 44.893326,21.552776 44.890831,21.548611 44.889442,21.502220 44.879715,21.478886 44.875275,21.462776 44.874443,21.444443 44.876389,21.415276 44.877495,21.400276 44.874992,21.373055 44.868607,21.366108 44.864441,21.363052 44.833057,21.362091 44.823143,21.394196 44.785934,21.400398 44.780823,21.405869 44.779732,21.453609 44.776665,21.474720 44.777771,21.524441 44.778328,21.543053 44.776382,21.565552 44.771660,21.588333 44.763329,21.594997 44.758888,21.600277 44.753609,21.604164 44.747498,21.615650 44.717705,21.616386 44.710274,21.614719 44.697495,21.614719 44.692215,21.614998 44.688606,21.618332 44.678329,21.622776 44.672218,21.632221 44.664993,21.639721 44.660828,21.649441 44.657776,21.655552 44.656944,21.729721 44.654716,21.738609 44.656944,21.783607 44.661942,21.909164 44.649437,21.988888 44.636940,21.993889 44.635551,22.001389 44.631104,22.003887 44.628609,22.029163 44.593887,22.031261 44.589424,22.033333 44.564438,22.035553 44.557495,22.039444 44.551666,22.084442 44.503052,22.091110 44.498329,22.106667 44.490273,22.128609 44.481384,22.146385 44.479164,22.168888 44.478607,22.176941 44.481941,22.187222 44.493889,22.258610 44.585274,22.273331 44.604164,22.297775 44.635826,22.303608 44.645828,22.308609 44.657776,22.313610 44.664162,22.320553 44.668327,22.423611 44.710274,22.431664 44.713333,22.436386 44.714439,22.457775 44.715553,22.469719 44.713608,22.479164 44.710274,22.489998 44.703331,22.496944 44.695000,22.508053 44.684715,22.519722 44.674721,22.543053 44.658607,22.574444 44.638611,22.592499 44.628052,22.604721 44.622215,22.609722 44.620552,22.622219 44.618889,22.644444 44.618607,22.659721 44.619995,22.671944 44.618889,22.709999 44.606667,22.713886 44.604721,22.717220 44.602493,22.762703 44.561920,22.764893 44.559006,22.765781 44.555199,22.765255 44.551338,22.763432 44.547325,22.760880 44.544411,22.754444 44.539719,22.743053 44.534439,22.734722 44.531662,22.709164 44.523888,22.699585 44.522522,22.686817 44.523979,22.677219 44.527222,22.667774 44.530548,22.645554 44.543053,22.632500 44.548607,22.621387 44.551109,22.609444 44.552216,22.590275 44.549164,22.582222 44.546104,22.463055 44.484444,22.459999 44.482216,22.457333 44.474358,22.457333 44.466698,22.461712 44.453201,22.463333 44.449997,22.529999 44.345276,22.536942 44.336388,22.549721 44.323051,22.567219 44.308327,22.576111 44.304718,22.591942 44.300827,22.616676 44.298035,22.641109 44.294167,22.657776 44.290550,22.672775 44.286385,22.680832 44.282494,22.687496 44.277771,22.691109 44.271660,22.691666 44.264160,22.681435 44.224701,22.676388 44.224716,22.653332 44.214439,22.650276 44.211937,22.619164 44.169998,22.614998 44.121666,22.614719 44.117493,22.552776 44.063889,22.536942 44.057777,22.420277 44.009438,22.416943 44.006943,22.367222 43.826942,22.406666 43.725555,22.414165 43.709442,22.536388 43.480827,22.543331 43.472496,22.550552 43.468330,22.628052 43.430832,22.669167 43.415833,22.718609 43.401382,22.724163 43.399994,22.761944 43.387497,22.766666 43.385826,22.824997 43.336388,22.833054 43.328888,22.834999 43.325829,22.845276 43.291664,22.845554 43.288055,22.847221 43.284996,22.849720 43.282219,22.904442 43.230827,22.907497 43.228607,22.940552 43.210548,23.004997 43.192772,22.993610 43.141663,22.990555 43.133049,22.966389 43.101662,22.745552 42.893608,22.741943 42.891663,22.733330 42.889717,22.662220 42.880829,22.654999 42.884995,22.614998 42.894722,22.603886 42.896111,22.585831 42.892776,22.524998 42.878609,22.520832 42.877220,22.514164 42.873055,22.448330 42.826660,22.442219 42.821663,22.440830 42.818604,22.440277 42.814720,22.447220 42.599442,22.464165 42.568886,22.472221 42.564995,22.522499 42.531105,22.544441 42.515549,22.549442 42.510277,22.558887 42.487495,22.558052 42.479164,22.538055 42.427498,22.536388 42.423332,22.522221 42.402222,22.519444 42.399162,22.459442 42.363052,22.410831 42.335274,22.365276 42.323883,22.335552 42.355827,22.332775 42.358330,22.324444 42.361382,22.308609 42.360275,22.221943 42.341660,22.218609 42.339722,22.216389 42.337219,22.213886 42.333611,22.212776 42.329437,22.210831 42.326111,22.206108 42.320000,22.198887 42.316383,22.195000 42.315277,22.184719 42.313889,22.083332 42.300552,22.072220 42.300552,22.061943 42.302216,22.023609 42.316940,21.855553 42.331108,21.850277 42.330826,21.841389 42.328331,21.806664 42.303329,21.799721 42.294167,21.794441 42.278610,21.793888 42.274162,21.788609 42.263329,21.778889 42.256943,21.738331 42.237495,21.721386 42.232773,21.710831 42.232216,21.704720 42.232773,21.681389 42.239716,21.619720 42.254166,21.481941 42.267776,21.466663 42.265831,21.459999 42.262497,21.348053 42.195549,21.344444 42.193054,21.306110 42.151382,21.304996 42.147774,21.221107 42.145271,21.215275 42.149994,21.141941 42.198051,21.133610 42.201385,21.128330 42.202499,21.116943 42.202499,21.104721 42.198883,20.914997 42.119995,20.807777 42.089996,20.796108 42.085274,20.792774 42.082497,20.785000 42.074715,20.771942 42.050827,20.769722 42.042770,20.759163 41.993332,20.759441 41.981384,20.761665 41.974442,20.778053 41.946663,20.778889 41.938332,20.778332 41.929718,20.777222 41.925552,20.773888 41.918884,20.744164 41.874161,20.733055 41.863884,20.726387 41.860275,20.713055 41.856667,20.702499 41.856110,20.631664 41.855827,20.623333 41.858604,20.615276 41.862495,20.605553 41.869164,20.589642 41.882187,20.580830 41.906662,20.581108 41.918884,20.583054 41.922218,20.588608 41.927498,20.595276 41.931938,20.611385 41.937492,20.617775 41.941666,20.621944 41.954163,20.623886 41.963333,20.623333 41.966942,20.595276 42.043610,20.526108 42.211662,20.524166 42.214439,20.508888 42.230270,20.470432 42.264557,20.458054 42.274437,20.450832 42.278328,20.386944 42.304161,20.355675 42.311844,20.257500 42.323326,20.252220 42.324440,20.244720 42.328606,20.243610 42.331940,20.237499 42.352493,20.237778 42.356667,20.241108 42.364166,20.241943 42.368889,20.224163 42.423332,20.220833 42.433327,20.168610 42.506943,20.161942 42.511665,20.158054 42.513329,20.106667 42.529999,20.097500 42.536942,20.071423 42.560913))', 4326));

-- Timestamp of last OSM_Preprocess() invocation.
INSERT INTO config_options (option_key, date_value) VALUES ('last_preprocessing', NULL);

-- Data timestamp during last OSM_Preprocess() invocation.
INSERT INTO config_options (option_key, date_value) VALUES ('last_preprocessing_data_timestamp', NULL);

---- FUNCTIONS

DROP FUNCTION IF EXISTS OSM_GetDataTimestamp();

CREATE FUNCTION OSM_GetDataTimestamp() RETURNS TIMESTAMP AS $$
	SELECT MAX(tstamp) FROM ways
$$ LANGUAGE SQL;

DROP FUNCTION IF EXISTS OSM_GetRelationGeometry(bigint);

CREATE FUNCTION OSM_GetRelationGeometry(bigint) RETURNS geometry AS $$
	SELECT ST_Union(w.linestring)::geometry
	FROM relation_members rm
	INNER JOIN ways w ON (w.id = rm.member_id)
	WHERE rm.relation_id = $1 AND member_type = 'W'
$$ LANGUAGE SQL;

DROP FUNCTION IF EXISTS OSM_IsMostlyCoveredBy(text, bigint);

-- Checks if ways of a relation are "mostly covered" by given boundary geometry.
-- param 1 - option_key from table config_options
-- param 2 - relation id
CREATE FUNCTION OSM_IsMostlyCoveredBy(text, bigint) RETURNS boolean AS $$
	SELECT (SELECT COUNT(*)
		FROM (SELECT ST_Contains((SELECT geom_value FROM config_options WHERE option_key = $1), linestring) AS is
			FROM relation_members rm
			INNER JOIN ways w ON (w.id = rm.member_id)
			WHERE rm.relation_id = $2 AND member_type = 'W') AS covered WHERE covered.is)::float * 100
		  > (SELECT COUNT(*)
		FROM relation_members rm
		INNER JOIN ways w ON (w.id = rm.member_id)
		WHERE rm.relation_id = $2 AND member_type = 'W')::float * 33
$$ LANGUAGE SQL;

DROP FUNCTION IF EXISTS OSM_GetConfigGeomValue(text);

CREATE FUNCTION OSM_GetConfigGeomValue(text) RETURNS geometry IMMUTABLE AS $$
	SELECT geom_value
	FROM config_options
	WHERE option_key = $1
$$ LANGUAGE SQL;

DROP FUNCTION IF EXISTS OSM_GetConfigDateValue(text);

CREATE FUNCTION OSM_GetConfigDateValue(text) RETURNS timestamp IMMUTABLE AS $$
	SELECT date_value
	FROM config_options
	WHERE option_key = $1
$$ LANGUAGE SQL;

DROP FUNCTION IF EXISTS OSM_GetConfigTextValue(text);

CREATE FUNCTION OSM_GetConfigTextValue(text) RETURNS text IMMUTABLE AS $$
	SELECT text_value
	FROM config_options
	WHERE option_key = $1
$$ LANGUAGE SQL;
